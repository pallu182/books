<HTML
><HEAD
>
<TITLE>[Chapter 7] 7.2.29 File::Copy&nbsp;- Copy Files or Filehandles</TITLE>
<META
NAME="DC.title"
CONTENT="Programming Perl"><META
NAME="DC.creator"
CONTENT="Larry Wall, Tom Christiansen &amp; Randal L. Schwartz"><META
NAME="DC.publisher"
CONTENT="O'Reilly &amp; Associates, Inc."><META
NAME="DC.date"
CONTENT="1999-07-02T02:02:26Z"><META
NAME="DC.type"
CONTENT="Text.Monograph"><META
NAME="DC.format"
CONTENT="text/html"
SCHEME="MIME"><META
NAME="DC.source"
CONTENT="1-56592-149-6"
SCHEME="ISBN"><META
NAME="DC.language"
CONTENT="en-US"><META
NAME="generator"
CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINK
REV="made"
HREF="mailto:online-books@oreilly.com"
TITLE="Online Books Comments"><LINK
REL="up"
HREF="ch07_02.htm"
TITLE="7.2 Library Modules"><LINK
REL="prev"
HREF="ch07_028.htm"
TITLE="7.2.28 File::CheckTree&nbsp;- Run Many Tests on a Collection of Files"><LINK
REL="next"
HREF="ch07_030.htm"
TITLE="7.2.30 File::Find&nbsp;- Traverse a File Tree"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
><DIV
CLASS="htmlnav"
><H1
><IMG
SRC="gifs/smbanner.gif"
ALT="Programming Perl"
USEMAP="#srchmap"
BORDER="0"></H1
><MAP
NAME="srchmap"
><AREA
SHAPE="RECT"
COORDS="0,0,466,65"
HREF="index.htm"
ALT="Programming Perl"><AREA
SHAPE="RECT"
COORDS="467,0,514,18"
HREF="../search/psrch.htm"
ALT="Search this book"></MAP
><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT2"
HREF="ch07_028.htm"
TITLE="7.2.28 File::CheckTree&nbsp;- Run Many Tests on a Collection of Files"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 7.2.28 File::CheckTree&nbsp;- Run Many Tests on a Collection of Files"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><B
><FONT
FACE="ARIEL,HELVETICA,HELV,SANSERIF"
SIZE="-1"
><A
CLASS="chapter"
REL="up"
HREF="ch07_01.htm"
TITLE="7. The Standard Perl Library"
>Chapter 7<BR>The Standard Perl Library</A
></FONT
></B
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT2"
HREF="ch07_030.htm"
TITLE="7.2.30 File::Find&nbsp;- Traverse a File Tree"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 7.2.30 File::Find&nbsp;- Traverse a File Tree"
BORDER="0"></A
></TD
></TR
></TABLE
>&nbsp;<HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><DIV
CLASS="SECT2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="AUTOID-22378"
>7.2.29 File::Copy&nbsp;- Copy Files or Filehandles</A
></H3
><PRE
CLASS="programlisting"
>use File::Copy;

copy(&quot;<CODE
CLASS="replaceable"
><I
>src-file</I
></CODE
>&quot;, &quot;<CODE
CLASS="replaceable"
><I
>dst-file</I
></CODE
>&quot;);
copy(&quot;Copy.pm&quot;, \*STDOUT);

use POSIX;
use File::Copy 'cp';

$fh = FileHandle-&gt;new(&quot;/dev/null&quot;, &quot;r&quot;);
cp($fh, &quot;<CODE
CLASS="replaceable"
><I
>dst-file</I
></CODE
>&quot;);'</PRE
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-22385"
></A
><A
CLASS="indexterm"
NAME="AUTOID-22387"
></A
><A
CLASS="indexterm"
NAME="AUTOID-22389"
></A
><A
CLASS="indexterm"
NAME="AUTOID-22392"
></A
>The Copy module provides one function, <CODE
CLASS="literal"
>copy()</CODE
>, that takes two
parameters: a file to copy from and a file to copy to.  Either
argument may be a string, a FileHandle reference, or a FileHandle
glob.  If the first argument is a filehandle of some
sort, it will be read from; if it is a filename, it will
be opened for reading.  Likewise, the second argument will be
written to (and created if need be).</P
><P
CLASS="para"
>An optional third parameter is a hint that requests the buffer size to
be used for copying.  This is the number of bytes from the first file
that will be held in memory at any given time, before being written to
the second file.  The default buffer size depends upon the file and the
operating system, but will generally be the whole file (up to 2Mb), or
1kb for filehandles that do not reference files (for example, sockets).</P
><P
CLASS="para"
>When running under VMS, this routine performs an RMS copy of
the file, in order to preserve file attributes, indexed file
structure, and so on.  The buffer size parameter is ignored.</P
><P
CLASS="para"
>You may use the syntax:</P
><PRE
CLASS="programlisting"
>use File::Copy &quot;cp&quot;</PRE
><P
CLASS="para"
>to get at the <CODE
CLASS="literal"
>cp()</CODE
> alias for the <CODE
CLASS="literal"
>copy()</CODE
> function.
The syntax is exactly
the same.</P
><P
CLASS="para"
><CODE
CLASS="literal"
>copy()</CODE
> returns <CODE
CLASS="literal"
>1</CODE
> on success, <CODE
CLASS="literal"
>0</CODE
> on failure;
<B
CLASS="emphasis.bold"
>$!</B
> will be set if an error was encountered.</P
></DIV
><DIV
CLASS="htmlnav"
><P
></P
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT2"
HREF="ch07_028.htm"
TITLE="7.2.28 File::CheckTree&nbsp;- Run Many Tests on a Collection of Files"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 7.2.28 File::CheckTree&nbsp;- Run Many Tests on a Collection of Files"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="book"
HREF="index.htm"
TITLE="Programming Perl"
><IMG
SRC="../gifs/txthome.gif"
ALT="Programming Perl"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT2"
HREF="ch07_030.htm"
TITLE="7.2.30 File::Find&nbsp;- Traverse a File Tree"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 7.2.30 File::Find&nbsp;- Traverse a File Tree"
BORDER="0"></A
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
>7.2.28 File::CheckTree&nbsp;- Run Many Tests on a Collection of Files</TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="index"
HREF="index/idx_0.htm"
TITLE="Book Index"
><IMG
SRC="../gifs/index.gif"
ALT="Book Index"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
>7.2.30 File::Find&nbsp;- Traverse a File Tree</TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><P
CLASS="nav"
><FONT
SIZE="-1"
>[ <A
HREF="../index.htm"
TITLE="The Perl CD Bookshelf"
>Library Home</A
> | <A
HREF="../perlnut/index.htm"
TITLE="Perl in a Nutshell"
>Perl in a Nutshell</A
> | <A
HREF="../learn/index.htm"
TITLE="Learning Perl"
>Learning Perl</A
> | <A
HREF="../learn32/index.htm"
TITLE="Learning Perl on Win32 Systems"
>Learning Perl on Win32</A
> | <A
HREF="index.htm"
TITLE="Programming Perl"
>Programming Perl</A
> | <A
HREF="../advprog/index.htm"
TITLE="Advanced Perl Programming"
>Advanced Perl Programming</A
> | <A
HREF="../cookbook/index.htm"
TITLE="Perl Cookbook"
>Perl Cookbook</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
