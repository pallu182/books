<HTML
><HEAD
>
<TITLE>[Chapter 7] 7.2.2 AutoLoader&nbsp;- Load Functions Only on Demand</TITLE>
<META
NAME="DC.title"
CONTENT="Programming Perl"><META
NAME="DC.creator"
CONTENT="Larry Wall, Tom Christiansen &amp; Randal L. Schwartz"><META
NAME="DC.publisher"
CONTENT="O'Reilly &amp; Associates, Inc."><META
NAME="DC.date"
CONTENT="1999-07-02T02:01:02Z"><META
NAME="DC.type"
CONTENT="Text.Monograph"><META
NAME="DC.format"
CONTENT="text/html"
SCHEME="MIME"><META
NAME="DC.source"
CONTENT="1-56592-149-6"
SCHEME="ISBN"><META
NAME="DC.language"
CONTENT="en-US"><META
NAME="generator"
CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINK
REV="made"
HREF="mailto:online-books@oreilly.com"
TITLE="Online Books Comments"><LINK
REL="up"
HREF="ch07_02.htm"
TITLE="7.2 Library Modules"><LINK
REL="prev"
HREF="ch07_001.htm"
TITLE="7.2.1 AnyDBM_File&nbsp;- Provide Framework for Multiple DBMs"><LINK
REL="next"
HREF="ch07_003.htm"
TITLE="7.2.3 AutoSplit&nbsp;- Split a Module for Autoloading"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
><DIV
CLASS="htmlnav"
><H1
><IMG
SRC="gifs/smbanner.gif"
ALT="Programming Perl"
USEMAP="#srchmap"
BORDER="0"></H1
><MAP
NAME="srchmap"
><AREA
SHAPE="RECT"
COORDS="0,0,466,65"
HREF="index.htm"
ALT="Programming Perl"><AREA
SHAPE="RECT"
COORDS="467,0,514,18"
HREF="../search/psrch.htm"
ALT="Search this book"></MAP
><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT2"
HREF="ch07_001.htm"
TITLE="7.2.1 AnyDBM_File&nbsp;- Provide Framework for Multiple DBMs"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 7.2.1 AnyDBM_File&nbsp;- Provide Framework for Multiple DBMs"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><B
><FONT
FACE="ARIEL,HELVETICA,HELV,SANSERIF"
SIZE="-1"
><A
CLASS="chapter"
REL="up"
HREF="ch07_01.htm"
TITLE="7. The Standard Perl Library"
>Chapter 7<BR>The Standard Perl Library</A
></FONT
></B
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT2"
HREF="ch07_003.htm"
TITLE="7.2.3 AutoSplit&nbsp;- Split a Module for Autoloading"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 7.2.3 AutoSplit&nbsp;- Split a Module for Autoloading"
BORDER="0"></A
></TD
></TR
></TABLE
>&nbsp;<HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><DIV
CLASS="SECT2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="AUTOID-19043"
>7.2.2 AutoLoader&nbsp;- Load Functions Only on Demand</A
></H3
><PRE
CLASS="programlisting"
>package GoodStuff;
use Exporter;
use AutoLoader;
@ISA = qw(Exporter AutoLoader);</PRE
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-19047"
></A
><A
CLASS="indexterm"
NAME="AUTOID-19049"
></A
><A
CLASS="indexterm"
NAME="AUTOID-19051"
></A
>The AutoLoader module provides a standard mechanism for 
delayed loading of functions stored in separate files on disk.
Each file has the same name as the function (plus a <EM
CLASS="emphasis"
>.al</EM
>), and
comes from a directory named after the package (with the <EM
CLASS="emphasis"
>auto/</EM
> directory).
For example, the function named <CODE
CLASS="literal"
>GoodStuff::whatever()</CODE
>
would be loaded from the file
<EM
CLASS="emphasis"
>auto/GoodStuff/whatever.al</EM
>.  </P
><P
CLASS="para"
>A module using the AutoLoader should have the special marker <CODE
CLASS="literal"
>__END__</CODE
>
prior to the actual subroutine declarations.  All code before this
marker is loaded and compiled when the module is used.  At the marker,
Perl stops parsing the file.</P
><P
CLASS="para"
>When a subroutine not yet in memory is called, the <CODE
CLASS="literal"
>AUTOLOAD</CODE
> function attempts to
locate it in a directory relative to the location of the module file itself. As
an example, assume <EM
CLASS="emphasis"
>POSIX.pm</EM
> is located in
<EM
CLASS="emphasis"
>/usr/local/lib/perl5/POSIX.pm</EM
>. The AutoLoader will look for
the corresponding subroutines for this package in
<EM
CLASS="emphasis"
>/usr/ local/lib/perl5/auto/POSIX/*.al</EM
>.</P
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-19067"
></A
>Lexicals declared with <A
CLASS="xref"
HREF="ch03_097.htm"
TITLE="my"
><B
CLASS="xref.cmd"
>my</B
></A
> in the
main block of a package using the AutoLoader will not be visible to autoloaded
functions, because the given lexical scope ends at the
<CODE
CLASS="literal"
>__END__</CODE
> marker.  A module using such
variables as file-scoped globals will not work properly under the AutoLoader.
Package globals must be used instead.  When running under <CODE
CLASS="literal"
>use
strict</CODE
>, the <CODE
CLASS="literal"
>use vars</CODE
> pragma may be employed in such
situations as an alternative to explicitly qualifying all globals with the
package name.  Package variables predeclared with this pragma will be accessible
to any autoloaded routines, but of course will not be invisible outside the
module file.</P
><P
CLASS="para"
>The AutoLoader is a counterpart to the SelfLoader module. Both delay the loading
of subroutines, but the SelfLoader accomplishes this by storing the subroutines
right there in the module file rather than in separate files elsewhere.  While
this avoids the use of a hierarchy of disk files and the associated I/O for each
routine loaded, the SelfLoader suffers a disadvantage in the one-time parsing of
the lines after <CODE
CLASS="literal"
>__DATA__</CODE
>, after which
routines are cached.  The SelfLoader can also handle multiple packages in a
file.</P
><P
CLASS="para"
>AutoLoader, on the other hand, only reads code as it is requested,
and in many cases should be faster.  But it requires a mechanism
like AutoSplit to be used to create the individual files.</P
><P
CLASS="para"
>On systems with restrictions on file name length, the file corresponding to a
subroutine may have a shorter name than the routine itself.  This can lead to
conflicting filenames. The AutoSplit module will warn of these potential
conflicts when used to split a module.</P
><P
CLASS="para"
>See the discussion of autoloading in <A
CLASS="xref"
HREF="ch05_01.htm"
TITLE="Packages, Modules, and Object Classes"
>Chapter 5</A
>.  Also see the
AutoSplit module, a utility that automatically splits a module into a collection
of files for autoloading.</P
></DIV
><DIV
CLASS="htmlnav"
><P
></P
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT2"
HREF="ch07_001.htm"
TITLE="7.2.1 AnyDBM_File&nbsp;- Provide Framework for Multiple DBMs"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 7.2.1 AnyDBM_File&nbsp;- Provide Framework for Multiple DBMs"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="book"
HREF="index.htm"
TITLE="Programming Perl"
><IMG
SRC="../gifs/txthome.gif"
ALT="Programming Perl"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT2"
HREF="ch07_003.htm"
TITLE="7.2.3 AutoSplit&nbsp;- Split a Module for Autoloading"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 7.2.3 AutoSplit&nbsp;- Split a Module for Autoloading"
BORDER="0"></A
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
>7.2.1 AnyDBM_File&nbsp;- Provide Framework for Multiple DBMs</TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="index"
HREF="index/idx_0.htm"
TITLE="Book Index"
><IMG
SRC="../gifs/index.gif"
ALT="Book Index"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
>7.2.3 AutoSplit&nbsp;- Split a Module for Autoloading</TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><P
CLASS="nav"
><FONT
SIZE="-1"
>[ <A
HREF="../index.htm"
TITLE="The Perl CD Bookshelf"
>Library Home</A
> | <A
HREF="../perlnut/index.htm"
TITLE="Perl in a Nutshell"
>Perl in a Nutshell</A
> | <A
HREF="../learn/index.htm"
TITLE="Learning Perl"
>Learning Perl</A
> | <A
HREF="../learn32/index.htm"
TITLE="Learning Perl on Win32 Systems"
>Learning Perl on Win32</A
> | <A
HREF="index.htm"
TITLE="Programming Perl"
>Programming Perl</A
> | <A
HREF="../advprog/index.htm"
TITLE="Advanced Perl Programming"
>Advanced Perl Programming</A
> | <A
HREF="../cookbook/index.htm"
TITLE="Perl Cookbook"
>Perl Cookbook</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
