<HTML
><HEAD
>
<TITLE>[Chapter 7] 7.2.18 ExtUtils::MakeMaker&nbsp;- Create a Makefile for a Perl Extension</TITLE>
<META
NAME="DC.title"
CONTENT="Programming Perl"><META
NAME="DC.creator"
CONTENT="Larry Wall, Tom Christiansen &amp; Randal L. Schwartz"><META
NAME="DC.publisher"
CONTENT="O'Reilly &amp; Associates, Inc."><META
NAME="DC.date"
CONTENT="1999-07-02T02:02:02Z"><META
NAME="DC.type"
CONTENT="Text.Monograph"><META
NAME="DC.format"
CONTENT="text/html"
SCHEME="MIME"><META
NAME="DC.source"
CONTENT="1-56592-149-6"
SCHEME="ISBN"><META
NAME="DC.language"
CONTENT="en-US"><META
NAME="generator"
CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINK
REV="made"
HREF="mailto:online-books@oreilly.com"
TITLE="Online Books Comments"><LINK
REL="up"
HREF="ch07_02.htm"
TITLE="7.2 Library Modules"><LINK
REL="prev"
HREF="ch07_017.htm"
TITLE="7.2.17 ExtUtils::Liblist&nbsp;- Determine Libraries to Use and How to Use Them"><LINK
REL="next"
HREF="ch07_019.htm"
TITLE="7.2.19 ExtUtils::Manifest&nbsp;- Utilities to Write and Check a MANIFEST File"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
><DIV
CLASS="htmlnav"
><H1
><IMG
SRC="gifs/smbanner.gif"
ALT="Programming Perl"
USEMAP="#srchmap"
BORDER="0"></H1
><MAP
NAME="srchmap"
><AREA
SHAPE="RECT"
COORDS="0,0,466,65"
HREF="index.htm"
ALT="Programming Perl"><AREA
SHAPE="RECT"
COORDS="467,0,514,18"
HREF="../search/psrch.htm"
ALT="Search this book"></MAP
><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT2"
HREF="ch07_017.htm"
TITLE="7.2.17 ExtUtils::Liblist&nbsp;- Determine Libraries to Use and How to Use Them"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 7.2.17 ExtUtils::Liblist&nbsp;- Determine Libraries to Use and How to Use Them"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><B
><FONT
FACE="ARIEL,HELVETICA,HELV,SANSERIF"
SIZE="-1"
><A
CLASS="chapter"
REL="up"
HREF="ch07_01.htm"
TITLE="7. The Standard Perl Library"
>Chapter 7<BR>The Standard Perl Library</A
></FONT
></B
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT2"
HREF="ch07_019.htm"
TITLE="7.2.19 ExtUtils::Manifest&nbsp;- Utilities to Write and Check a MANIFEST File"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 7.2.19 ExtUtils::Manifest&nbsp;- Utilities to Write and Check a MANIFEST File"
BORDER="0"></A
></TD
></TR
></TABLE
>&nbsp;<HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><DIV
CLASS="SECT2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="AUTOID-20573"
>7.2.18 ExtUtils::MakeMaker&nbsp;- Create a Makefile for a Perl Extension</A
></H3
><PRE
CLASS="programlisting"
>use ExtUtils::MakeMaker;
WriteMakefile( <CODE
CLASS="replaceable"
><I
>ATTRIBUTE</I
></CODE
> =&gt; <CODE
CLASS="replaceable"
><I
>VALUE</I
></CODE
>, ... );

# which internally is really more like...
%att = (<CODE
CLASS="replaceable"
><I
>ATTRIBUTE</I
></CODE
> =&gt; <CODE
CLASS="replaceable"
><I
>VALUE</I
></CODE
>, ...);
MM-&gt;new(\%att)-&gt;flush;</PRE
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="CH07.MM1"
></A
><A
CLASS="indexterm"
NAME="CH07.MM2"
></A
><A
CLASS="indexterm"
NAME="CH07.MM3"
></A
><A
CLASS="indexterm"
NAME="CH07.MM4"
></A
><A
CLASS="indexterm"
NAME="CH07.MM5"
></A
>When you build an extension to Perl, you need to have an appropriate
<EM
CLASS="emphasis"
>Makefile</EM
>[<A
CLASS="footnote"
HREF="#AUTOID-20594"
>9</A
>]
in the extension's source directory.  And
while you could conceivably write one by hand, this would be rather tedious. 
So you'd like a program to write it for you.</P
><BLOCKQUOTE
CLASS="footnote"
><DIV
CLASS="footnote"
><P
CLASS="para"
><A
CLASS="footnote"
NAME="AUTOID-20594"
>[9]</A
> If you don't know what a
<EM
CLASS="emphasis"
>Makefile</EM
> is, or what the
<EM
CLASS="emphasis"
>make</EM
>(1) program does with one, you
<EM
CLASS="emphasis"
>really</EM
> shouldn't be reading this section.  We will be
assuming that you know what happens when you type a command like
<CODE
CLASS="literal"
>make&nbsp;foo</CODE
>.</P
></DIV
></BLOCKQUOTE
><P
CLASS="para"
>Originally, this was done using a shell script (actually, one for each
extension) called <EM
CLASS="emphasis"
>Makefile.SH</EM
>, much like the one that
writes the <EM
CLASS="emphasis"
>Makefile</EM
> for Perl itself.  But somewhere along
the line, it occurred to the perl5-porters that, by the time you want to compile
your extensions, there's already a bare-bones version of the Perl executable
called <EM
CLASS="emphasis"
>miniperl</EM
>, if not a fully installed
<EM
CLASS="emphasis"
>perl</EM
>.  And for some strange reason, Perl programmers prefer
programming in Perl to programming in shell.  So they wrote MakeMaker, just so
that you can write <EM
CLASS="emphasis"
>Makefile.PL</EM
> instead of
<EM
CLASS="emphasis"
>Makefile.SH</EM
>.</P
><P
CLASS="para"
>MakeMaker isn't a program; it's a module (or it wouldn't be in this chapter).
The module provides the routines you need; you just need to <A
CLASS="xref"
HREF="ch03_185.htm"
TITLE="use"
><B
CLASS="xref.cmd"
>use</B
></A
> the module, and then call the routines.  As with any
programming job, there are many degrees of freedom; but your typical
<EM
CLASS="emphasis"
>Makefile.PL</EM
> is pretty simple.  For example, here's
<EM
CLASS="emphasis"
>ext/POSIX/Makefile.PL</EM
> from the Perl distribution's POSIX
extension (which is by no means a trivial extension):</P
><PRE
CLASS="programlisting"
>use ExtUtils::MakeMaker;
WriteMakefile(
    NAME         =&gt; 'POSIX',
    LIBS         =&gt; [&quot;-lm -lposix -lcposix&quot;],
    MAN3PODS     =&gt; ' ',    # Pods will be built by installman.
    XSPROTOARG   =&gt; '-noprototypes',       # XXX remove later?
    VERSION_FROM =&gt; 'POSIX.pm', 
);</PRE
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-20613"
></A
>Several things are apparent from this example, but the most important is
that the <CODE
CLASS="literal"
>WriteMakefile()</CODE
> function uses named parameters.  This
means that you can pass many potential parameters, but you're only required to
pass the ones you want to be different from the default values.  (And when we
say &quot;many&quot;, we mean &quot;many&quot;&nbsp;- there are about 75 of them.  See the
Attributes section later.)</P
><P
CLASS="para"
>As the synopsis above indicates, the <CODE
CLASS="literal"
>WriteMakefile()</CODE
> function
actually constructs an object.  This object has attributes that are set
from various sources, including the parameters you pass to the function.
It's this object that actually writes your <EM
CLASS="emphasis"
>Makefile</EM
>,
meshing together the demands of your extension with the demands of the
architecture on which the extension is being installed.  Like many
craftily crafted objects, this MakeMaker object delegates as much of its
work as possible to various other subroutines and methods.  Many of
these may be overridden in your <EM
CLASS="emphasis"
>Makefile.PL</EM
> if you need to do some
fine tuning.  (Generally you don't.)</P
><P
CLASS="para"
>But let's not lose track of the goal, which is to write a <EM
CLASS="emphasis"
>Makefile</EM
>
that will know how to do anything to your extension that needs doing.
Now as you can imagine, the <EM
CLASS="emphasis"
>Makefile</EM
> that MakeMaker writes is
quite, er, full-featured.  It's easy to get lost in all the
details.  If you look at the POSIX <EM
CLASS="emphasis"
>Makefile</EM
> generated
by the bit of code above, you will find a file containing about 122
macros and 77 targets.  You will want to go off into a corner and curl
up into a little ball, saying, &quot;Never mind, I didn't really want to
know.&quot;</P
><P
CLASS="para"
>Well, the fact of the matter is, you really <EM
CLASS="emphasis"
>don't</EM
> want to know,
nor do you have to.  Most of these items take care of themselves&nbsp;- that's
what MakeMaker is there for, after all.  We'll lay out the various
attributes and targets for you, but you can just pick and choose, like
in a cafeteria.  We'll talk about the <EM
CLASS="emphasis"
>make</EM
> targets first, because they're
the actions you eventually want to perform, and then work backward
to the macros and attributes that feed the targets.</P
><P
CLASS="para"
>But before we do that, you need to know just a few more architectural
features of MakeMaker to make sense of some of the things we'll say.
The targets at the end of your <EM
CLASS="emphasis"
>Makefile</EM
> depend on the macro
definitions that are interpolated into them.  Those macro definitions in
turn come from any of several places.  Depending on how you count, there
are about five sources of information for these attributes.  Ordered by
increasing precedence and (more or less) decreasing permanence, they are:</P
><UL
CLASS="itemizedlist"
><LI
CLASS="listitem"
><P
CLASS="para"
>Platform-specific values in Perl's Config module, provided by
the <EM
CLASS="emphasis"
>Configure</EM
> program that was run when Perl was installed on this machine.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>The <CODE
CLASS="literal"
>WriteMakefile()</CODE
> function call arguments in <EM
CLASS="emphasis"
>Makefile.Pl</EM
>,
supplied by the extension writer.  (You saw some of those above.)</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>Platform-specific hints in the extension's <EM
CLASS="emphasis"
>hints/</EM
> directory, also
provided by extension writer.  We'll talk about those later.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>Overriding values from the command line for <EM
CLASS="emphasis"
>Makefile.PL</EM
> script,
supplied by the person who runs the script.  These look like <CODE
CLASS="literal"
>KEY=VALUE</CODE
>.</P
></LI
><LI
CLASS="listitem"
><P
CLASS="para"
>Overriding values from the command line for <EM
CLASS="emphasis"
>make</EM
> itself,
supplied by the person who runs the <EM
CLASS="emphasis"
>make</EM
>.  These also look like <CODE
CLASS="literal"
>KEY=VALUE</CODE
>.</P
></LI
></UL
><P
CLASS="para"
>The first four of these turn into attributes of the object we mentioned,
and are eventually written out as macro definitions in your
<EM
CLASS="emphasis"
>Makefile</EM
>.  In most cases, the names of the values are consistent
from beginning to end.  (Except that the Config database keeps the names
in lowercase, as they come from Perl's <EM
CLASS="emphasis"
>config.sh</EM
> file.  The names
are translated to uppercase when they become attributes of the object.)
In any case, we'll tend to use the term <EM
CLASS="emphasis"
>attributes</EM
> to mean both
attributes and the <EM
CLASS="emphasis"
>Makefile</EM
> macros derived from them.</P
><P
CLASS="para"
>The <EM
CLASS="emphasis"
>Makefile.PL</EM
> and the <EM
CLASS="emphasis"
>hints</EM
> may also provide overriding
methods for the object, if merely changing an attribute isn't good
enough.</P
><P
CLASS="para"
>The hints files are expected to be named
like their counterparts in <EM
CLASS="emphasis"
>PERL_SRC/hints</EM
>, but with a <EM
CLASS="emphasis"
>.pl</EM
>
filename extension (for example, <EM
CLASS="emphasis"
>next_3_2.pl</EM
>), because the file
consists of Perl code to be evaluated.  Apart from that, the rules
governing which hintsfile is chosen are the same as in <EM
CLASS="emphasis"
>Configure</EM
>.
The hintsfile is <A
CLASS="xref"
HREF="ch03_032.htm"
TITLE="eval"
><B
CLASS="xref.cmd"
>eval</B
></A
>ed within a routine that is a method of our
MakeMaker object, so if you want to
override or create an attribute, you would say something like:</P
><PRE
CLASS="programlisting"
>$self-&gt;{LIBS} = ['-ldbm -lucb -lc'];</PRE
><P
CLASS="para"
>By and large, if your <EM
CLASS="emphasis"
>Makefile</EM
> isn't doing what you want, you just
trace back the name of the misbehaving attribute to its source, and either
change it there or override it downstream.</P
><P
CLASS="para"
>Extensions may be built using the contents of either the Perl source
directory tree or the installed Perl library.  The recommended way
is to build extensions after you have run <EM
CLASS="emphasis"
>make install</EM
> on Perl
itself.  You can then build your extension in any directory on your hard disk that is not
below the Perl source tree.  The support for extensions below the
<EM
CLASS="emphasis"
>ext/</EM
>
directory of the Perl distribution is only good for the standard
extensions that come with Perl.</P
><P
CLASS="para"
>If an extension is being built below the <EM
CLASS="emphasis"
>ext/</EM
> directory of
the Perl source, then MakeMaker will set <CODE
CLASS="literal"
>PERL_SRC</CODE
>
automatically (usually to <CODE
CLASS="literal"
>../..</CODE
>).  If
<CODE
CLASS="literal"
>PERL_SRC</CODE
> is defined and the extension is recognized as a
standard extension, then other variables default to the following:</P
><PRE
CLASS="programlisting"
>PERL_INC     = PERL_SRC
PERL_LIB     = PERL_SRC/lib
PERL_ARCHLIB = PERL_SRC/lib
INST_LIB     = PERL_LIB
INST_ARCHLIB = PERL_ARCHLIB</PRE
><P
CLASS="para"
>If an extension is being built away from the Perl source, then MakeMaker
will leave <CODE
CLASS="literal"
>PERL_SRC</CODE
> undefined and default to using the installed copy
of the Perl library.  The other variables default to the following:</P
><PRE
CLASS="programlisting"
>PERL_INC     = $archlibexp/CORE
PERL_LIB     = $privlibexp
PERL_ARCHLIB = $archlibexp
INST_LIB     = ./blib/lib
INST_ARCHLIB = ./blib/arch</PRE
><P
CLASS="para"
>If Perl has not yet been installed, then <CODE
CLASS="literal"
>PERL_SRC</CODE
> can be defined as
an override on the command line.</P
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="PERL2-CH-7-SECT-1.19"
>7.2.18.1 Targets</A
></H4
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-20683"
></A
><A
CLASS="indexterm"
NAME="AUTOID-20685"
></A
>Far and away the most commonly used <EM
CLASS="emphasis"
>make</EM
> targets are those used by
the installer to install the extension.  So we aim to make the normal
installation very easy:</P
><PRE
CLASS="programlisting"
>perl Makefile.PL  # generate the <EM
CLASS="emphasis"
>Makefile</EM
>
make              # compile the extension
make test         # test the extension
make install      # install the extension</PRE
><P
CLASS="para"
>This assumes that the installer has dynamic linking available.  If not,
a couple of additional commands are also necessary:</P
><PRE
CLASS="programlisting"
>make perl         # link a new <EM
CLASS="emphasis"
>perl</EM
> statically with this extension
make inst_perl    # install that new <EM
CLASS="emphasis"
>perl</EM
> appropriately</PRE
><P
CLASS="para"
>Other interesting targets in the generated <EM
CLASS="emphasis"
>Makefile</EM
> are:</P
><PRE
CLASS="programlisting"
>make config       # check whether the <EM
CLASS="emphasis"
>Makefile</EM
> is up-to-date
make clean        # delete local temp files (<CODE
CLASS="replaceable"
><I
>Makefile</I
></CODE
> gets renamed)
make realclean    # delete derived files (including <CODE
CLASS="replaceable"
><I
>./blib</I
></CODE
>)
make ci           # check in all files in the <EM
CLASS="emphasis"
>MANIFEST</EM
> file
make dist         # see the &quot;Distribution Support&quot; section below</PRE
><P
CLASS="para"
>Now we'll talk about some of these commands, and how each of them is
related to MakeMaker.  So we'll not only be talking about things that
happen when you invoke the <EM
CLASS="emphasis"
>make</EM
> target, but also about what
MakeMaker has to do to generate that <EM
CLASS="emphasis"
>make</EM
> target.  So brace
yourself for some temporal whiplash.</P
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="PERL2-CH-7-SECT-1.20"
>7.2.18.2 Running MakeMaker</A
></H4
><P
CLASS="para"
>This command is the one most closely related to MakeMaker because it's the
one in which you actually run MakeMaker.  No temporal whiplash here.
As we mentioned earlier, some of the 
default attribute values may be
overridden by adding arguments of the form <CODE
CLASS="literal"
>KEY=VALUE</CODE
>.  For
example:</P
><PRE
CLASS="programlisting"
>perl Makefile.PL PREFIX=/tmp/myperl5</PRE
><P
CLASS="para"
>To get a more detailed view of what MakeMaker is doing, say:</P
><PRE
CLASS="programlisting"
>perl Makefile.PL verbose</PRE
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="PERL2-CH-7-SECT-1.21"
>7.2.18.3 Making whatever is needed</A
></H4
><P
CLASS="para"
>A <EM
CLASS="emphasis"
>make</EM
> command without arguments performs any compilation needed
and puts any generated files into staging directories that are named by the
attributes <CODE
CLASS="literal"
>INST_LIB</CODE
>, <CODE
CLASS="literal"
>INST_ARCHLIB</CODE
>, <CODE
CLASS="literal"
>INST_EXE</CODE
>,
<CODE
CLASS="literal"
>INST_MAN1DIR</CODE
>, and <CODE
CLASS="literal"
>INST_MAN3DIR</CODE
>.
These directories default to
something below <EM
CLASS="emphasis"
>./blib</EM
> if you are <EM
CLASS="emphasis"
>not</EM
> building below the
Perl source directory.  If you <EM
CLASS="emphasis"
>are</EM
> building below the Perl source,
<CODE
CLASS="literal"
>INST_LIB</CODE
> and <CODE
CLASS="literal"
>INST_ARCHLIB</CODE
> default to <EM
CLASS="emphasis"
>../../lib</EM
>,
and <CODE
CLASS="literal"
>INST_EXE</CODE
> is not defined.</P
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="PERL2-CH-7-SECT-1.22"
>7.2.18.4 Running tests</A
></H4
><P
CLASS="para"
>The goal of this command is to run any regression tests supplied with the
extension, so MakeMaker checks for the existence of a file named
<EM
CLASS="emphasis"
>test.pl</EM
> in the current directory and, if it exists, adds
commands to the <CODE
CLASS="literal"
>test</CODE
> target of the
<EM
CLASS="emphasis"
>Makefile</EM
> that will execute the script with the proper set
of Perl <B
CLASS="emphasis.bold"
>-I</B
> options (since the 
files haven't been installed into their final location yet).</P
><P
CLASS="para"
>MakeMaker also checks for any files matching
<CODE
CLASS="literal"
>glob(&quot;t/*.t&quot;)</CODE
>.  It will add commands to the
<CODE
CLASS="literal"
>test</CODE
> target that execute all matching files via the
Test::Harness module with the <B
CLASS="emphasis.bold"
>-I</B
> switches
set correctly.  If you pass <CODE
CLASS="literal"
>TEST_VERBOSE=1</CODE
>, the
<CODE
CLASS="literal"
>test</CODE
> target will run the tests verbosely.</P
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="PERL2-CH-7-SECT-1.23"
>7.2.18.5 Installing files</A
></H4
><P
CLASS="para"
>Once the installer has tested the extension, the various generated files
need to get put into their final resting places.  The <CODE
CLASS="literal"
>install</CODE
>
target copies the files found below each of the <CODE
CLASS="literal"
>INST_*</CODE
>
directories to their <CODE
CLASS="literal"
>INSTALL*</CODE
> counterparts.</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>INST_LIB</CODE
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><IMG
SRC="../chars/rarr.gif"
ALT="-&gt;"></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>INSTALLPRIVLIB</CODE
>[<A
CLASS="footnote"
HREF="#PERL2-CH7-TABFTN7"
>10</A
>]<CODE
CLASS="literal"
>or
INSTALLSITELIB</CODE
>[<A
CLASS="footnote"
HREF="#PERL2-CH7-TABFTN8"
>11</A
>]</TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>INST_ARCHLIB</CODE
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><IMG
SRC="../chars/rarr.gif"
ALT="-&gt;"></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>INSTALLARCHLIB</CODE
>[<A
CLASS="footnote"
HREF="#PERL2-CH7-TABFTN7"
>10</A
>]<CODE
CLASS="literal"
>or INSTALLSITEARCH</CODE
>[<A
CLASS="footnote"
HREF="#PERL2-CH7-TABFTN8"
>11</A
>]</TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>INST_EXE</CODE
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><IMG
SRC="../chars/rarr.gif"
ALT="-&gt;"></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>INSTALLBIN</CODE
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>INST_MAN1DIR</CODE
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><IMG
SRC="../chars/rarr.gif"
ALT="-&gt;"></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>INSTALLMAN1DIR</CODE
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>INST_MAN3DIR</CODE
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><IMG
SRC="../chars/rarr.gif"
ALT="-&gt;"></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>INSTALLMAN3DIR</CODE
></TD
></TR
></TBODY
></TABLE
><BLOCKQUOTE
CLASS="footnote"
><DIV
CLASS="footnote"
><P
CLASS="para"
><A
CLASS="footnote"
NAME="PERL2-CH7-TABFTN7"
>[10]</A
> if <CODE
CLASS="literal"
>INSTALLDIRS</CODE
> set to
&quot;<CODE
CLASS="literal"
>perl</CODE
>&quot;</P
></DIV
><DIV
CLASS="footnote"
><P
CLASS="para"
><A
CLASS="footnote"
NAME="PERL2-CH7-TABFTN8"
>[11]</A
> if
<CODE
CLASS="literal"
>INSTALLDIRS</CODE
> set to
&quot;<CODE
CLASS="literal"
>site</CODE
>&quot;</P
></DIV
></BLOCKQUOTE
><P
CLASS="para"
>The <CODE
CLASS="literal"
>INSTALL*</CODE
> attributes in turn default to their <CODE
CLASS="literal"
>%Config</CODE
>
counterparts, <CODE
CLASS="literal"
>$Config{installprivlib}</CODE
>,
<CODE
CLASS="literal"
>$Config{installarchlib}</CODE
>, and so on.</P
><P
CLASS="para"
>If you don't set <CODE
CLASS="literal"
>INSTALLARCHLIB</CODE
> or <CODE
CLASS="literal"
>INSTALLSITEARCH</CODE
>,
MakeMaker will
assume you want them to be subdirectories of <CODE
CLASS="literal"
>INSTALLPRIVLIB</CODE
>
and <CODE
CLASS="literal"
>INSTALLSITELIB</CODE
>,
respectively.  The exact relationship is determined by <EM
CLASS="emphasis"
>Configure</EM
>.  But
you can usually just go with the defaults for all these attributes.</P
><P
CLASS="para"
>The <CODE
CLASS="literal"
>PREFIX</CODE
> attribute can be used to redirect all the <CODE
CLASS="literal"
>INSTALL*</CODE
>
attributes in one go.  Here's the quickest way to install a module in a
nonstandard place:</P
><PRE
CLASS="programlisting"
>perl Makefile.PL PREFIX=~ \</PRE
><P
CLASS="para"
>The value you specify for <CODE
CLASS="literal"
>PREFIX</CODE
> replaces one or more
leading pathname components in all <CODE
CLASS="literal"
>INSTALL*</CODE
> attributes.  The
prefix to be replaced is determined by the value of
<CODE
CLASS="literal"
>$Config{prefix}</CODE
>, which typically has a value like <EM
CLASS="emphasis"
>/usr</EM
>.
(Note that the tilde expansion above is done by MakeMaker, not by
<EM
CLASS="emphasis"
>perl</EM
> or <EM
CLASS="emphasis"
>make</EM
>.)</P
><P
CLASS="para"
>If the user has superuser privileges and is not working under the
Andrew File System (AFS) or relatives, then the defaults for
<CODE
CLASS="literal"
>INSTALLPRIVLIB</CODE
>, <CODE
CLASS="literal"
>INSTALLARCHLIB</CODE
>, <CODE
CLASS="literal"
>INSTALLBIN</CODE
>, and so
on should be appropriate.</P
><P
CLASS="para"
>By default, <EM
CLASS="emphasis"
>make install</EM
> writes some documentation of what has been
done into the file given by <CODE
CLASS="literal"
>$(INSTALLARCHLIB)/perllocal.pod</CODE
>.
This feature can be bypassed by calling <EM
CLASS="emphasis"
>make pure_install</EM
>.</P
><P
CLASS="para"
>If you are using AFS, you must
specify the installation directories, since these most
probably have changed since Perl itself was installed.
Do this by issuing these commands:</P
><PRE
CLASS="programlisting"
>perl Makefile.PL INSTALLSITELIB=/afs/here/today
    INSTALLBIN=/afs/there/now INSTALLMAN3DIR=/afs/for/manpages
make</PRE
><P
CLASS="para"
>Be careful to repeat this procedure every time you recompile an
extension, unless you are sure the AFS installation directories are
still valid.</P
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="PERL2-CH-7-SECT-1.24"
>7.2.18.6 Static linking of a new Perl binary</A
></H4
><P
CLASS="para"
>The steps above are sufficient on a system supporting dynamic loading.
On systems that do not support dynamic loading, however, the extension
has to be linked together statically with everything else you might want
in your <EM
CLASS="emphasis"
>perl</EM
> executable.  MakeMaker supports the linking process
by creating appropriate targets in the <EM
CLASS="emphasis"
>Makefile</EM
>.  If you say:</P
><PRE
CLASS="programlisting"
>make perl</PRE
><P
CLASS="para"
>it will produce a new <EM
CLASS="emphasis"
>perl</EM
> binary in the current directory with
all extensions linked in that can be found in <CODE
CLASS="literal"
>INST_ARCHLIB</CODE
>,
<CODE
CLASS="literal"
>SITELIBEXP</CODE
>, and <CODE
CLASS="literal"
>PERL_ARCHLIB</CODE
>.  To do that, MakeMaker
writes a new <EM
CLASS="emphasis"
>Makefile</EM
>; on UNIX it is called <EM
CLASS="emphasis"
>Makefile.aperl</EM
>,
but the name may be system-dependent.  When you want to force the
creation of a new <EM
CLASS="emphasis"
>perl</EM
>, we recommend that you delete this
<EM
CLASS="emphasis"
>Makefile.aperl</EM
> so the directories are searched for linkable
libraries again.</P
><P
CLASS="para"
>The binary can be installed in the directory where Perl normally
resides on your machine with:</P
><PRE
CLASS="programlisting"
>make inst_perl</PRE
><P
CLASS="para"
>To produce a Perl binary with a different filename than <EM
CLASS="emphasis"
>perl</EM
>, either say:</P
><PRE
CLASS="programlisting"
>perl Makefile.PL MAP_TARGET=myperl
make myperl
make inst_perl</PRE
><P
CLASS="para"
>or say:</P
><PRE
CLASS="programlisting"
>perl Makefile.PL
make myperl MAP_TARGET=myperl
make inst_perl MAP_TARGET=myperl</PRE
><P
CLASS="para"
>In either case, you will be asked to confirm the invocation of the
<CODE
CLASS="literal"
>inst_perl</CODE
> target, since this invocation is likely to overwrite
your existing Perl binary in <CODE
CLASS="literal"
>INSTALLBIN</CODE
>.</P
><P
CLASS="para"
>By default <EM
CLASS="emphasis"
>make inst_perl</EM
> documents what has been
done in the file given by <CODE
CLASS="literal"
>$(INSTALLARCHLIB)/perllocal.pod</CODE
>.  This
behavior can be bypassed by calling <EM
CLASS="emphasis"
>make pure_inst_perl</EM
>.</P
><P
CLASS="para"
>Sometimes you might want to build a statically linked Perl even though
your system supports dynamic loading.  In this case you may explicitly
set the linktype:</P
><PRE
CLASS="programlisting"
>perl Makefile.PL LINKTYPE=static</PRE
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="PERL2-CH-7-SECT-1.25"
>7.2.18.7 Attributes you can set</A
></H4
><P
CLASS="para"
>The following attributes can be specified as arguments to
<CODE
CLASS="literal"
>WriteMakefile()</CODE
> or as <CODE
CLASS="literal"
>NAME=VALUE</CODE
> pairs on the command
line.  We give examples below in the form they would appear in your
<EM
CLASS="emphasis"
>Makefile.PL</EM
>, that is, as though passed as a named parameter to
<CODE
CLASS="literal"
>WriteMakefile()</CODE
> (including the comma that comes after it).</P
><DL
CLASS="variablelist"
><DT
CLASS="term"
><CODE
CLASS="literal"
>C</CODE
>   </DT
><DD
CLASS="listitem"
><P
CLASS="para"
>A reference to an array of *<EM
CLASS="emphasis"
>.c</EM
> filenames.  It's initialized by doing a
directory scan and by derivation from the values of the <CODE
CLASS="literal"
>XS</CODE
>
attribute hash.  This is not currently used by MakeMaker but may be
handy in <EM
CLASS="emphasis"
>Makefile.PL</EM
>s.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>CONFIG</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>An array reference containing a list of attributes to fetch from
<CODE
CLASS="literal"
>%Config</CODE
>.  For example:</P
><PRE
CLASS="programlisting"
>CONFIG =&gt; [qw(archname manext)],</PRE
><P
CLASS="para"
>defines
<CODE
CLASS="literal"
>ARCHNAME</CODE
> and <CODE
CLASS="literal"
>MANEXT</CODE
> from <EM
CLASS="emphasis"
>config.sh</EM
>.  MakeMaker will
automatically add the following values to <CODE
CLASS="literal"
>CONFIG</CODE
>:</P
><PRE
CLASS="programlisting"
>ar            dlext        ldflags     ranlib
cc            dlsrc        libc        sitelibexp
cccdlflags    ld           lib_ext     sitearchexp
ccdlflags     lddlflags    obj_ext     so</PRE
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>CONFIGURE</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>A reference to a subroutine returning a hash reference.  The
hash may contain further attributes, for example, <CODE
CLASS="literal"
>{LIBS =&gt; ...}</CODE
>,
that have to be determined by some evaluation method.  Be careful,
because any attributes defined this way will override hints and
<CODE
CLASS="literal"
>WriteMakefile()</CODE
> parameters (but not command-line arguments).</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>DEFINE</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>An attribute containing additional defines, such as <CODE
CLASS="literal"
>-DHAVE_UNISTD_H</CODE
>.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>DIR</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>A reference to an array of subdirectories containing
<EM
CLASS="emphasis"
>Makefile.PL</EM
>s.  For example, SDBM_FILE has:</P
><PRE
CLASS="programlisting"
>DIR =&gt; ['sdbm'],</PRE
><P
CLASS="para"
>MakeMaker will automatically do recursive MakeMaking if subdirectories
contain <EM
CLASS="emphasis"
>Makefile.PL</EM
> files.  A separate MakeMaker class is
generated for each subdirectory, so each MakeMaker object can override
methods using the fake <CODE
CLASS="literal"
>MY::</CODE
> class (see below) without
interfering with other MakeMaker objects.  You don't even need a
<EM
CLASS="emphasis"
>Makefile.PL</EM
> in the top level directory if you pass one in via
<B
CLASS="emphasis.bold"
>-M</B
> and <B
CLASS="emphasis.bold"
>-e</B
>:</P
><PRE
CLASS="programlisting"
>perl -MExtUtils::MakeMaker -e 'WriteMakefile()'</PRE
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>DISTNAME</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Your name for distributing the package (by <EM
CLASS="emphasis"
>tar</EM
> file).  This defaults to
<CODE
CLASS="literal"
>NAME</CODE
> below.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>DL_FUNCS</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>A reference to a hash of symbol names for routines to be made available
as universal symbols.  Each key/value pair consists of the package name
and an array of routine names in that package.  This attribute is used
only under AIX (export lists) and VMS (linker options) at present.  The
routine names supplied will be expanded in the same way as <CODE
CLASS="literal"
>XSUB</CODE
>
names are expanded by the <CODE
CLASS="literal"
>XS</CODE
> attribute.</P
><P
CLASS="para"
>The default key/value pair
looks like this:</P
><PRE
CLASS="programlisting"
>&quot;$PKG&quot; =&gt; [&quot;boot_$PKG&quot;]</PRE
><P
CLASS="para"
>For a pair of packages named RPC and NetconfigPtr, you might, for
example, set it to this:</P
><PRE
CLASS="programlisting"
>DL_FUNCS =&gt; {
    RPC          =&gt; [qw(boot_rpcb rpcb_gettime getnetconfigent)],
    NetconfigPtr =&gt; ['DESTROY'],
},</PRE
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>DL_VARS</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>An array of symbol names for variables to be made available as
universal symbols.  It's used only under AIX (export lists) and VMS
(linker options) at present.  Defaults to <CODE
CLASS="literal"
>[]</CODE
>.  A typical
value might look like this:</P
><PRE
CLASS="programlisting"
>DL_VARS =&gt; [ qw( Foo_version Foo_numstreams Foo_tree ) ],</PRE
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>EXE_FILES</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>A reference to an array of executable files.  The files will be copied to the
<CODE
CLASS="literal"
>INST_EXE</CODE
> directory.  A <EM
CLASS="emphasis"
>make realclean</EM
> command will delete
them from there again.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>FIRST_MAKEFILE</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>The name of the <EM
CLASS="emphasis"
>Makefile</EM
> to be produced.  Defaults to the contents
of <CODE
CLASS="literal"
>MAKEFILE</CODE
>, but can be overridden.  This is used for the second
<EM
CLASS="emphasis"
>Makefile</EM
> that will be produced for the <CODE
CLASS="literal"
>MAP_TARGET</CODE
>.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>FULLPERL</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>A Perl binary able to run this extension.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>H</CODE
>   </DT
><DD
CLASS="listitem"
><P
CLASS="para"
>A reference to an array of *<EM
CLASS="emphasis"
>.h</EM
> filenames.  Similar to <CODE
CLASS="literal"
>C</CODE
>.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>INC</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Directories containing include files, in <B
CLASS="emphasis.bold"
>-I</B
> form.  For example:</P
><PRE
CLASS="programlisting"
>INC =&gt; &quot;-I/usr/5include -I/path/to/inc&quot;,</PRE
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>INSTALLARCHLIB</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Used by <EM
CLASS="emphasis"
>make install</EM
>, which copies files from
<CODE
CLASS="literal"
>INST_ARCHLIB</CODE
> to this directory if
<CODE
CLASS="literal"
>INSTALLDIRS</CODE
> is set to &quot;<CODE
CLASS="literal"
>perl</CODE
>&quot;.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>INSTALLBIN</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Used by <EM
CLASS="emphasis"
>make install</EM
>, which copies files from
<CODE
CLASS="literal"
>INST_EXE</CODE
> to this directory.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>INSTALLDIRS</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Determines which of the two sets of installation directories to
choose: <EM
CLASS="emphasis"
>installprivlib</EM
> and <EM
CLASS="emphasis"
>installarchlib</EM
> versus
<EM
CLASS="emphasis"
>installsitelib</EM
> and <EM
CLASS="emphasis"
>installsitearch</EM
>.  The first pair is chosen
with <CODE
CLASS="literal"
>INSTALLDIRS=perl</CODE
>, the second with <CODE
CLASS="literal"
>INSTALLDIRS=site</CODE
>.
The default is &quot;<CODE
CLASS="literal"
>site</CODE
>&quot;.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>INSTALLMAN1DIR</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>This directory gets the command manpages at <EM
CLASS="emphasis"
>make
install</EM
> time. It defaults to
<CODE
CLASS="literal"
>$Config{installman1dir}</CODE
>.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>INSTALLMAN3DIR</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>This directory gets the library manpages at <EM
CLASS="emphasis"
>make
install</EM
> time. It defaults to
<CODE
CLASS="literal"
>$Config{installman3dir}</CODE
>.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>INSTALLPRIVLIB</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Used by <EM
CLASS="emphasis"
>make install</EM
>, which copies files from
<CODE
CLASS="literal"
>INST_LIB</CODE
> to this directory if <CODE
CLASS="literal"
>INSTALLDIRS</CODE
>
is set to &quot;<CODE
CLASS="literal"
>perl</CODE
>&quot;.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>INSTALLSITELIB</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Used by <EM
CLASS="emphasis"
>make install</EM
>, which copies files from
<CODE
CLASS="literal"
>INST_LIB</CODE
> to this directory if <CODE
CLASS="literal"
>INSTALLDIRS</CODE
>
is set to &quot;<CODE
CLASS="literal"
>site</CODE
>&quot; (default).</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>INSTALLSITEARCH</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Used by <EM
CLASS="emphasis"
>make install</EM
>, which copies files from
<CODE
CLASS="literal"
>INST_ARCHLIB</CODE
> to this directory if
<CODE
CLASS="literal"
>INSTALLDIRS</CODE
> is set to &quot;<CODE
CLASS="literal"
>site</CODE
>&quot;
(default).</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>INST_ARCHLIB</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Same as <CODE
CLASS="literal"
>INST_LIB</CODE
>, but for architecture-dependent files.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>INST_EXE</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Directory where executable scripts should be staged during running of
<EM
CLASS="emphasis"
>make</EM
>.  Defaults to <CODE
CLASS="literal"
>./blib/bin</CODE
>, just to
have a dummy location during testing.  <EM
CLASS="emphasis"
>make install</EM
> will
copy the files in <CODE
CLASS="literal"
>INST_EXE</CODE
> to <CODE
CLASS="literal"
>INSTALLBIN</CODE
>.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>INST_LIB</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Directory where we put library files of this extension while building
it.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>INST_MAN1DIR</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Directory to hold the command manpages at <EM
CLASS="emphasis"
>make</EM
> time.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>INST_MAN3DIR</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Directory to hold the library manpages at <EM
CLASS="emphasis"
>make</EM
> time</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>LDFROM</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Defaults to <CODE
CLASS="literal"
>$(OBJECT)</CODE
> and is used in the <EM
CLASS="emphasis"
>ld</EM
>(1) command to specify
what files to link/load from.  (Also see <CODE
CLASS="literal"
>dynamic_lib</CODE
> later for how to
specify <EM
CLASS="emphasis"
>ld</EM
> flags.)</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>LIBPERL_A</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>The filename of the Perl library that will be used together with this
extension.  Defaults to <EM
CLASS="emphasis"
>libperl.a</EM
>.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>LIBS</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>An anonymous array of alternative library
specifications to be searched for (in order) until
at least one library is found. </P
><P
CLASS="para"
>For example:</P
><PRE
CLASS="programlisting"
>LIBS =&gt; [&quot;-lgdbm&quot;, &quot;-ldbm -lfoo&quot;, &quot;-L/path -ldbm.nfs&quot;],</PRE
><P
CLASS="para"
>Note that any element of the array
contains a complete set of arguments for the <EM
CLASS="emphasis"
>ld</EM
>
command.  So do not specify:</P
><PRE
CLASS="programlisting"
>LIBS =&gt; [&quot;-ltcl&quot;, &quot;-ltk&quot;, &quot;-lX11&quot;],</PRE
><P
CLASS="para"
>See <EM
CLASS="emphasis"
>NDBM_File/Makefile.PL</EM
> for an example where an array is needed.  If
you specify a scalar as in:</P
><PRE
CLASS="programlisting"
>LIBS =&gt; &quot;-ltcl -ltk -lX11&quot;,</PRE
><P
CLASS="para"
>MakeMaker will turn it into an array with one element.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>LINKTYPE</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>&quot;<CODE
CLASS="literal"
>static</CODE
>&quot; or
&quot;<CODE
CLASS="literal"
>dynamic</CODE
>&quot; (the latter is the default unless
<CODE
CLASS="literal"
>usedl=undef</CODE
> in <EM
CLASS="emphasis"
>config.sh</EM
>).  Should only
be used to force static linking.  (Also see <CODE
CLASS="literal"
>linkext</CODE
>, later in
this chapter).</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>MAKEAPERL</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Boolean that tells MakeMaker to include the rules for
making a Perl binary. This is handled automatically as a switch by
MakeMaker. The user normally does not need it.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>MAKEFILE</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>The name of the <EM
CLASS="emphasis"
>Makefile</EM
> to be produced.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>MAN1PODS</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>A reference to a hash of POD-containing files.  MakeMaker will default
this to all <CODE
CLASS="literal"
>EXE_FILES</CODE
> files that include POD directives.  The
files listed here will be converted to manpages and installed as
requested at <EM
CLASS="emphasis"
>Configure</EM
> time.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>MAN3PODS</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>A reference to a hash of <EM
CLASS="emphasis"
>.pm</EM
> and <EM
CLASS="emphasis"
>.pod</EM
> files.  MakeMaker will
default this to all <EM
CLASS="emphasis"
>.pod</EM
> and any <EM
CLASS="emphasis"
>.pm</EM
> files that include
POD directives.  The files listed here will be converted to manpages
and installed as requested at <EM
CLASS="emphasis"
>Configure</EM
> time.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>MAP_TARGET</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>If it is intended that a new Perl binary be produced, this variable
holds the name for that binary.  Defaults to <EM
CLASS="emphasis"
>perl</EM
>.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>MYEXTLIB</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>If the extension links to a library that it builds, set this to the
name of the library (see SDBM_File).</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>NAME</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Perl module name for this extension (for example, <CODE
CLASS="literal"
>DBD::Oracle</CODE
>).
This will default to the directory name, but should really be explicitly
defined in the <EM
CLASS="emphasis"
>Makefile.PL</EM
>.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>NEEDS_LINKING</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>MakeMaker will figure out whether an extension contains linkable code
anywhere down the directory tree, and will set this variable
accordingly.  But you can speed it up a very little bit if you define
this Boolean variable yourself.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>NOECHO</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Governs <EM
CLASS="emphasis"
>make</EM
>'s <CODE
CLASS="literal"
>@</CODE
> (echoing) feature.  By setting <CODE
CLASS="literal"
>NOECHO</CODE
>
to an empty string, you can generate a
<EM
CLASS="emphasis"
>Makefile</EM
> that echos all commands.  Mainly used in debugging MakeMaker
itself.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>NORECURS</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>A Boolean that inhibits the automatic descent into subdirectories (see
<CODE
CLASS="literal"
>DIR</CODE
> above).  For example:</P
><PRE
CLASS="programlisting"
>NORECURS =&gt; 1,</PRE
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>OBJECT</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>A string containing a list of object files, defaulting to
<CODE
CLASS="literal"
>$(BASEEXT)$(OBJ_EXT)</CODE
>.  But it can be a long string containing
all object files.  For example:</P
><PRE
CLASS="programlisting"
>OBJECT =&gt; &quot;tkpBind.o tkpButton.o tkpCanvas.o&quot;,</PRE
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>PERL</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Perl binary for tasks that can be done by <EM
CLASS="emphasis"
>miniperl</EM
>.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>PERLMAINCC</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>The command line that is able to compile <EM
CLASS="emphasis"
>perlmain.c</EM
>.  Defaults
to <CODE
CLASS="literal"
>$(CC)</CODE
>.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>PERL_ARCHLIB</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Same as <CODE
CLASS="literal"
>PERL_LIB</CODE
> for architecture-dependent files.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>PERL_LIB</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>The directory containing the Perl library to use.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>PERL_SRC</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>The directory containing the Perl source code.  Use of this should be
avoided, since it may be undefined.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>PL_FILES</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>A reference to hash of files to be processed as Perl programs.  By default
MakeMaker will turn the names of any *<EM
CLASS="emphasis"
>.PL</EM
> files it finds (except
<EM
CLASS="emphasis"
>Makefile.PL</EM
>) into keys, and use the basenames of these files as values.
For example:</P
><PRE
CLASS="programlisting"
>PL_FILES =&gt; {'whatever.PL' =&gt; 'whatever'},</PRE
><P
CLASS="para"
>This turns into a Makefile entry resembling:</P
><PRE
CLASS="programlisting"
>all :: whatever

whatever :: whatever.PL
        $(PERL) -I$(INST_ARCHLIB) -I$(INST_LIB) \
                -I$(PERL_ARCHLIB) -I$(PERL_LIB) whatever.PL</PRE
><P
CLASS="para"
>You'll note that there's no I/O redirection into <EM
CLASS="emphasis"
>whatever</EM
> there.
The *<EM
CLASS="emphasis"
>.PL</EM
> files are expected to produce output to the target files
themselves.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>PM</CODE
>   </DT
><DD
CLASS="listitem"
><P
CLASS="para"
>A reference to a hash of <EM
CLASS="emphasis"
>.pm</EM
> files and
<EM
CLASS="emphasis"
>.pl</EM
> files to be installed. For example:</P
><PRE
CLASS="programlisting"
>PM =&gt; {'name_of_file.pm' =&gt; '$(INST_LIBDIR)/install_as.pm'},</PRE
><P
CLASS="para"
>By default this includes *<EM
CLASS="emphasis"
>.pm</EM
> and
*<EM
CLASS="emphasis"
>.pl</EM
>.  If a <EM
CLASS="emphasis"
>lib/</EM
> subdirectory exists
and is not listed in <CODE
CLASS="literal"
>DIR</CODE
> (above) then any
*<EM
CLASS="emphasis"
>.pm</EM
> and *<EM
CLASS="emphasis"
>.pl</EM
> files it contains will
also be included by default.  Defining <CODE
CLASS="literal"
>PM</CODE
> in the
<EM
CLASS="emphasis"
>Makefile.PL</EM
> will override <CODE
CLASS="literal"
>PMLIBDIRS</CODE
>.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>PMLIBDIRS</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>A reference to an array of subdirectories that contain library files.
Defaults to:</P
><PRE
CLASS="programlisting"
>PMLIBDIRS =&gt; [ 'lib', '$(BASEEXT)' ],</PRE
><P
CLASS="para"
>The directories will be scanned and any files
they contain will be installed in the corresponding location in the
library.  A <CODE
CLASS="literal"
>libscan()</CODE
> method may be used to alter the behavior.
Defining <CODE
CLASS="literal"
>PM</CODE
> in the <EM
CLASS="emphasis"
>Makefile.PL</EM
> will override <CODE
CLASS="literal"
>PMLIBDIRS</CODE
>.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>PREFIX</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>May be used to set the three <CODE
CLASS="literal"
>INSTALL*</CODE
> attributes in one go (except for
probably <CODE
CLASS="literal"
>INSTALLMAN1DIR</CODE
> if it is not below <CODE
CLASS="literal"
>PREFIX</CODE
> according to
<CODE
CLASS="literal"
>%Config</CODE
>).  They will have <CODE
CLASS="literal"
>PREFIX</CODE
> as a common directory node
and will branch from that node into <CODE
CLASS="literal"
>lib/</CODE
>, <CODE
CLASS="literal"
>lib/ARCHNAME</CODE
>
or whatever <EM
CLASS="emphasis"
>Configure</EM
> decided at the build time of your Perl (unless
you override one of them, of course).</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>PREREQ</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>A placeholder, not yet implemented.  Will eventually be a hash
reference: the keys of the hash are names of modules that need to be
available to run this extension (for example, Fcntl for SDBM_File); the
values of the hash are the desired versions of the modules.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>SKIP</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>An array reference specifying the names of sections of the
<EM
CLASS="emphasis"
>Makefile</EM
> not to write.  For example:</P
><PRE
CLASS="programlisting"
>SKIP =&gt; [qw(name1 name2)],</PRE
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>TYPEMAPS</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>A reference to an array of typemap filenames.  (Typemaps are used by the
XS preprocessing system.)  Use this when the typemaps are
in some directory other than the current directory or when they are
not named <EM
CLASS="emphasis"
>typemap</EM
>.  The last typemap in the list takes
precedence.  A typemap in the current directory has highest
precedence, even if it isn't listed in <CODE
CLASS="literal"
>TYPEMAPS</CODE
>.  The default system
typemap has lowest precedence.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>VERSION</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Your version number for distributing the package.  This number defaults to
0.1.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>VERSION_FROM</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Instead of specifying the <CODE
CLASS="literal"
>VERSION</CODE
> in the <EM
CLASS="emphasis"
>Makefile.PL</EM
>, you can let
MakeMaker parse a file to determine the version number.  The parsing
routine requires that the file named by <CODE
CLASS="literal"
>VERSION_FROM</CODE
> contain one
single line to compute the version number.  The first line in the file
that contains the regular expression:</P
><PRE
CLASS="programlisting"
>/(\$[\w:]*\bVERSION)\b.*=/</PRE
><P
CLASS="para"
>will be evaluated with <A
CLASS="xref"
HREF="ch03_032.htm"
TITLE="eval"
><B
CLASS="xref.cmd"
>eval</B
></A
> and the value of the named variable
after the <A
CLASS="xref"
HREF="ch03_032.htm"
TITLE="eval"
><B
CLASS="xref.cmd"
>eval</B
></A
> will be assigned to the <CODE
CLASS="literal"
>VERSION</CODE
> attribute of the
MakeMaker object.  The following lines will be parsed satisfactorily:</P
><PRE
CLASS="programlisting"
>$VERSION = '1.00';
( $VERSION ) = '$Revision: 1.64 $ ' =~ /\$Revision:\s+([^\s]+)/;
$FOO::VERSION = '1.10';</PRE
><P
CLASS="para"
>but these will fail:</P
><PRE
CLASS="programlisting"
>my $VERSION = '1.01';
local $VERSION = '1.02';
local $FOO::VERSION = '1.30';</PRE
><P
CLASS="para"
>The file named in <CODE
CLASS="literal"
>VERSION_FROM</CODE
> is added as a dependency to the
<EM
CLASS="emphasis"
>Makefile</EM
> in order to guarantee that the <EM
CLASS="emphasis"
>Makefile</EM
> contains
the correct <CODE
CLASS="literal"
>VERSION</CODE
> attribute after a change of the file.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>XS</CODE
>   </DT
><DD
CLASS="listitem"
><P
CLASS="para"
>A hash reference of <EM
CLASS="emphasis"
>.xs</EM
> files.  MakeMaker will default this.
For example:</P
><PRE
CLASS="programlisting"
>XS =&gt; {'name_of_file.xs' =&gt; 'name_of_file.c'},</PRE
><P
CLASS="para"
>The *<EM
CLASS="emphasis"
>.c</EM
> files will automatically be included in the list of files
deleted by a <EM
CLASS="emphasis"
>make clean</EM
>.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>XSOPT</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>A string of options to pass to <EM
CLASS="emphasis"
>xsubpp</EM
> (the XS preprocessor).  This
might include <CODE
CLASS="literal"
>-C++</CODE
> or <CODE
CLASS="literal"
>-extern</CODE
>.  Do not include typemaps
here; the <CODE
CLASS="literal"
>TYPEMAP</CODE
> parameter exists for that purpose.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>XSPROTOARG</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>May be set to an empty string, which is identical to <CODE
CLASS="literal"
>-prototypes</CODE
>, or
<CODE
CLASS="literal"
>-noprototypes</CODE
>.
MakeMaker defaults to the empty string.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>XS_VERSION</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Your version number for the <EM
CLASS="emphasis"
>.xs</EM
> file of this package.  This defaults
to the value of the <CODE
CLASS="literal"
>VERSION</CODE
> attribute.</P
></DD
></DL
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="PERL2-CH-7-SECT-1.26"
>7.2.18.8 Additional lowercase attributes</A
></H4
><P
CLASS="para"
>There are additional lowercase attributes that you can use to pass
parameters to the methods that spit out particular portions
of the <EM
CLASS="emphasis"
>Makefile</EM
>. These attributes are not normally required.</P
><DL
CLASS="variablelist"
><DT
CLASS="term"
><CODE
CLASS="literal"
>clean</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Extra files to clean.</P
><PRE
CLASS="programlisting"
>clean =&gt; {FILES =&gt; &quot;*.xyz foo&quot;},</PRE
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>depend</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Extra dependencies.</P
><PRE
CLASS="programlisting"
>depend =&gt; {<CODE
CLASS="replaceable"
><I
>ANY_TARGET</I
></CODE
> =&gt; <CODE
CLASS="replaceable"
><I
>ANY_DEPENDENCY</I
></CODE
>, ...},</PRE
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>dist</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Options for distribution (see &quot;Distribution Support&quot; below).</P
><PRE
CLASS="programlisting"
>dist =&gt; {
    TARFLAGS =&gt; 'cvfF',
    COMPRESS =&gt; 'gzip',
    SUFFIX =&gt; 'gz',
    SHAR =&gt; 'shar -m',
    DIST_CP =&gt; 'ln',
},</PRE
><P
CLASS="para"
>If you specify <CODE
CLASS="literal"
>COMPRESS</CODE
>, then <CODE
CLASS="literal"
>SUFFIX</CODE
>
should also be altered, since it is needed in order to specify for
<EM
CLASS="emphasis"
>make</EM
> the target file of the compression.  Setting
<CODE
CLASS="literal"
>DIST_CP</CODE
> to &quot;<CODE
CLASS="literal"
>ln</CODE
>&quot; can
be useful if you need to
preserve the timestamps on your files.  <CODE
CLASS="literal"
>DIST_CP</CODE
> can take the
values &quot;<CODE
CLASS="literal"
>cp</CODE
>&quot; (copy the file),
&quot;<CODE
CLASS="literal"
>ln</CODE
>&quot; (link the file), or
&quot;<CODE
CLASS="literal"
>best</CODE
>&quot; (copy symbolic links and link the rest).
Default is &quot;<CODE
CLASS="literal"
>best</CODE
>&quot;.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>dynamic_lib</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Options for dynamic library support.</P
><PRE
CLASS="programlisting"
>dynamic_lib =&gt; {
    ARMAYBE =&gt; 'ar',
    OTHERLDFLAGS =&gt; '...',
    INST_DYNAMIC_DEP =&gt; '...',
},</PRE
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>installpm</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Some installation options having to do with AutoSplit.</P
><PRE
CLASS="programlisting"
>{SPLITLIB =&gt; '$(INST_LIB)' (default) or '$(INST_ARCHLIB)'}</PRE
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>linkext</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Linking style.</P
><PRE
CLASS="programlisting"
>linkext =&gt; {LINKTYPE =&gt; 'static', 'dynamic', or &quot;&quot;},</PRE
><P
CLASS="para"
>Extensions that have nothing but <EM
CLASS="emphasis"
>*.pm</EM
> files used to have to say:</P
><PRE
CLASS="programlisting"
>linkext =&gt; {LINKTYPE =&gt; &quot;&quot;},</PRE
><P
CLASS="para"
>with Pre-5.0 MakeMakers.  With Version 5.00 of MakeMaker such a line
can be deleted safely.  MakeMaker recognizes when there's nothing to
be linked.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>macro</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Extra macros to define.</P
><PRE
CLASS="programlisting"
>macro =&gt; {ANY_MACRO =&gt; ANY_VALUE, ...},</PRE
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>realclean</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Extra files to really clean.</P
><PRE
CLASS="programlisting"
>{FILES =&gt; '$(INST_ARCHAUTODIR)/*.xyz'}</PRE
></DD
></DL
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="PERL2-CH-7-SECT-1.27"
>7.2.18.9 Useful Makefile macros</A
></H4
><P
CLASS="para"
>Here are some useful macros that you probably shouldn't redefine because
they're derivative.</P
><DL
CLASS="variablelist"
><DT
CLASS="term"
><CODE
CLASS="literal"
>FULLEXT</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Pathname for extension directory (for example, <EM
CLASS="emphasis"
>DBD/Oracle</EM
>).</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>BASEEXT</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Basename part of <CODE
CLASS="literal"
>FULLEXT</CODE
>.  May be just equal to <CODE
CLASS="literal"
>FULLEXT</CODE
>.</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>ROOTEXT</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Directory part of <CODE
CLASS="literal"
>FULLEXT</CODE
> with leading slash (for example, <EM
CLASS="emphasis"
>/DBD</EM
>)</P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>INST_LIBDIR</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
><CODE
CLASS="literal"
>$(INST_LIB)$(ROOTEXT)</CODE
></P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>INST_AUTODIR</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
><CODE
CLASS="literal"
>$(INST_LIB)/auto/$(FULLEXT)</CODE
></P
></DD
><DT
CLASS="term"
><CODE
CLASS="literal"
>INST_ARCHAUTODIR</CODE
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
><CODE
CLASS="literal"
>$(INST_ARCHLIB)/auto/$(FULLEXT)</CODE
></P
></DD
></DL
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="PERL2-CH-7-SECT-1.28"
>7.2.18.10 Overriding MakeMaker methods</A
></H4
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-21464"
></A
>If you cannot achieve the desired <EM
CLASS="emphasis"
>Makefile</EM
> behavior by specifying
attributes, you may define private subroutines in the <EM
CLASS="emphasis"
>Makefile.PL</EM
>.
Each subroutine returns the text it wishes to have written to
the <EM
CLASS="emphasis"
>Makefile</EM
>.  To override a section of the <EM
CLASS="emphasis"
>Makefile</EM
> you can
use one of two styles.  You can just return a new value:</P
><PRE
CLASS="programlisting"
>sub MY::c_o { &quot;new literal text&quot; }</PRE
><P
CLASS="para"
>or you can edit the default by saying something like:</P
><PRE
CLASS="programlisting"
>sub MY::c_o {
    my $self = shift;
    local *c_o;
    $_=$self-&gt;MM::c_o;
    s/old text/new text/;
    $_;
}</PRE
><P
CLASS="para"
>Both methods above are available for backward compatibility with
older <EM
CLASS="emphasis"
>Makefile.PL</EM
>s.</P
><P
CLASS="para"
>If you still need a different solution, try to develop another subroutine that
better fits your needs and then submit the diffs to either
<A
CLASS="email"
HREF="mailto:perl5-porters@nicoh.com"
>perl5-porters@nicoh.com</A
> or
<A
CLASS="systemitem.newsgroup"
HREF="news:comp.lang.perl.modules"
>comp.lang.perl.modules</A
> as appropriate.</P
></DIV
><DIV
CLASS="sect3"
><H4
CLASS="sect3"
><A
CLASS="title"
NAME="PERL2-CH-7-SECT-1.29"
>7.2.18.11 Distribution support</A
></H4
><P
CLASS="para"
>For authors of extensions, MakeMaker provides several
<EM
CLASS="emphasis"
>Makefile</EM
> targets.  Most of the support comes from the
ExtUtils::Manifest module, where additional documentation can be found.  Note
that a <EM
CLASS="emphasis"
>MANIFEST</EM
> file is basically just a list of filenames
to be shipped with the kit to build the extension.</P
><DL
CLASS="variablelist"
><DT
CLASS="term"
><EM
CLASS="emphasis"
>make distcheck</EM
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Reports which files are below the build directory but not in the
<EM
CLASS="emphasis"
>MANIFEST</EM
> file and vice versa.  (See
<CODE
CLASS="literal"
>ExtUtils::Manifest::fullcheck()</CODE
> for details.)</P
></DD
><DT
CLASS="term"
><EM
CLASS="emphasis"
>make skipcheck</EM
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Reports which files are skipped due to the entries in the
<EM
CLASS="emphasis"
>MANIFEST.SKIP</EM
> file.  (See <CODE
CLASS="literal"
>ExtUtils::Manifest::skipcheck()</CODE
> for
details).</P
></DD
><DT
CLASS="term"
><EM
CLASS="emphasis"
>make distclean</EM
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Does a <EM
CLASS="emphasis"
>realclean</EM
> first and then the <EM
CLASS="emphasis"
>distcheck</EM
>.
Note that this is not
needed to build a new distribution as long as you are sure that the
<EM
CLASS="emphasis"
>MANIFEST</EM
> file is OK.</P
></DD
><DT
CLASS="term"
><EM
CLASS="emphasis"
>make manifest</EM
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Rewrites the <EM
CLASS="emphasis"
>MANIFEST</EM
> file, adding all remaining files found.  (See
<CODE
CLASS="literal"
>ExtUtils::Manifest::mkmanifest()</CODE
> for details.)</P
></DD
><DT
CLASS="term"
><EM
CLASS="emphasis"
>make distdir</EM
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Copies all files that are in the <EM
CLASS="emphasis"
>MANIFEST</EM
> file to a newly created
directory with the name <CODE
CLASS="literal"
>$(DISTNAME)-$(VERSION)</CODE
>.  If that directory
exists, it will be removed first.</P
></DD
><DT
CLASS="term"
><EM
CLASS="emphasis"
>make disttest</EM
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Makes <EM
CLASS="emphasis"
>distdir</EM
> first, and runs <EM
CLASS="emphasis"
>perl
Makefile.PL</EM
>, <EM
CLASS="emphasis"
>make</EM
>, and <EM
CLASS="emphasis"
>make
test</EM
> in that directory.</P
></DD
><DT
CLASS="term"
><EM
CLASS="emphasis"
>make tardist</EM
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>First does a command <CODE
CLASS="literal"
>$(PREOP)</CODE
>, which defaults to a null
command.  Does a <EM
CLASS="emphasis"
>make distdir</EM
> next and runs
<EM
CLASS="emphasis"
>tar</EM
>(1) on that directory into a tarfile.  Then
deletes the <EM
CLASS="emphasis"
>distdir</EM
>.  Finishes with a command
<CODE
CLASS="literal"
>$(POSTOP)</CODE
>, which defaults to a null command.</P
></DD
><DT
CLASS="term"
><EM
CLASS="emphasis"
>make dist</EM
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Defaults to <CODE
CLASS="literal"
>$(DIST_DEFAULT)</CODE
>, which in turn defaults to
<EM
CLASS="emphasis"
>tardist</EM
>.</P
></DD
><DT
CLASS="term"
><EM
CLASS="emphasis"
>make uutardist</EM
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Runs a <EM
CLASS="emphasis"
>tardist</EM
> first and <EM
CLASS="emphasis"
>uuencode</EM
>s the tarfile.</P
></DD
><DT
CLASS="term"
><EM
CLASS="emphasis"
>make shdist</EM
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>First does a command <CODE
CLASS="literal"
>$(PREOP)</CODE
>, which defaults to a null
command.  Does a <EM
CLASS="emphasis"
>distdir</EM
> next and runs
<EM
CLASS="emphasis"
>shar</EM
> on that directory into a sharfile.  Then deletes the
<EM
CLASS="emphasis"
>distdir</EM
>.  Finishes with a command <CODE
CLASS="literal"
>$(POSTOP)</CODE
>, which defaults
to a null command.  Note:  for <EM
CLASS="emphasis"
>shdist</EM
> to work properly, a
<EM
CLASS="emphasis"
>shar</EM
> program that can handle directories is mandatory.</P
></DD
><DT
CLASS="term"
><EM
CLASS="emphasis"
>make ci</EM
></DT
><DD
CLASS="listitem"
><P
CLASS="para"
>Does a <CODE
CLASS="literal"
>$(CI)</CODE
> and a <CODE
CLASS="literal"
>$(RCS_LABEL)</CODE
> on all files in the
<EM
CLASS="emphasis"
>MANIFEST</EM
> file.</P
></DD
></DL
><P
CLASS="para"
>Customization of the distribution targets can be done by specifying a hash
reference to the <CODE
CLASS="literal"
>dist</CODE
> attribute of the
<CODE
CLASS="literal"
>WriteMakefile()</CODE
> call.  The following parameters are
recognized:</P
><TABLE
CLASS="informaltable"
BORDER="1"
CELLPADDING="3"
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
>Parameter</TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
>Default</TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>CI</CODE
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>('ci -u')</CODE
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>COMPRESS</CODE
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>('compress')</CODE
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>POSTOP</CODE
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>('@ :')</CODE
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>PREOP</CODE
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>('@ :')</CODE
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>RCS_LABEL</CODE
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>('rcs -q -Nv$(VERSION_SYM):')</CODE
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>SHAR</CODE
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>('shar')</CODE
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>SUFFIX</CODE
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>('Z')</CODE
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>TAR</CODE
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>('tar')</CODE
></TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>TARFLAGS</CODE
></TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
><CODE
CLASS="literal"
>('cvf')</CODE
></TD
></TR
></TBODY
></TABLE
><P
CLASS="para"
>An example:</P
><PRE
CLASS="programlisting"
>WriteMakefile( 'dist' =&gt; { COMPRESS=&gt;&quot;gzip&quot;, SUFFIX=&gt;&quot;gz&quot; })</PRE
><A
CLASS="indexterm"
NAME="AUTOID-21631"
></A
><A
CLASS="indexterm"
NAME="AUTOID-21632"
></A
><A
CLASS="indexterm"
NAME="AUTOID-21633"
></A
><A
CLASS="indexterm"
NAME="AUTOID-21634"
></A
><A
CLASS="indexterm"
NAME="AUTOID-21635"
></A
></DIV
></DIV
><DIV
CLASS="htmlnav"
><P
></P
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT2"
HREF="ch07_017.htm"
TITLE="7.2.17 ExtUtils::Liblist&nbsp;- Determine Libraries to Use and How to Use Them"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 7.2.17 ExtUtils::Liblist&nbsp;- Determine Libraries to Use and How to Use Them"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="book"
HREF="index.htm"
TITLE="Programming Perl"
><IMG
SRC="../gifs/txthome.gif"
ALT="Programming Perl"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT2"
HREF="ch07_019.htm"
TITLE="7.2.19 ExtUtils::Manifest&nbsp;- Utilities to Write and Check a MANIFEST File"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 7.2.19 ExtUtils::Manifest&nbsp;- Utilities to Write and Check a MANIFEST File"
BORDER="0"></A
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
>7.2.17 ExtUtils::Liblist&nbsp;- Determine Libraries to Use and How to Use Them</TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="index"
HREF="index/idx_0.htm"
TITLE="Book Index"
><IMG
SRC="../gifs/index.gif"
ALT="Book Index"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
>7.2.19 ExtUtils::Manifest&nbsp;- Utilities to Write and Check a MANIFEST File</TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><P
CLASS="nav"
><FONT
SIZE="-1"
>[ <A
HREF="../index.htm"
TITLE="The Perl CD Bookshelf"
>Library Home</A
> | <A
HREF="../perlnut/index.htm"
TITLE="Perl in a Nutshell"
>Perl in a Nutshell</A
> | <A
HREF="../learn/index.htm"
TITLE="Learning Perl"
>Learning Perl</A
> | <A
HREF="../learn32/index.htm"
TITLE="Learning Perl on Win32 Systems"
>Learning Perl on Win32</A
> | <A
HREF="index.htm"
TITLE="Programming Perl"
>Programming Perl</A
> | <A
HREF="../advprog/index.htm"
TITLE="Advanced Perl Programming"
>Advanced Perl Programming</A
> | <A
HREF="../cookbook/index.htm"
TITLE="Perl Cookbook"
>Perl Cookbook</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
