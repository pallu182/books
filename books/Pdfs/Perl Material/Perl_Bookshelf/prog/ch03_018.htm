<HTML
><HEAD
>
<TITLE>[Chapter 3] 3.2.18 close</TITLE>
<META
NAME="DC.title"
CONTENT="Programming Perl"><META
NAME="DC.creator"
CONTENT="Larry Wall, Tom Christiansen &amp; Randal L. Schwartz"><META
NAME="DC.publisher"
CONTENT="O'Reilly &amp; Associates, Inc."><META
NAME="DC.date"
CONTENT="1999-07-02T01:48:03Z"><META
NAME="DC.type"
CONTENT="Text.Monograph"><META
NAME="DC.format"
CONTENT="text/html"
SCHEME="MIME"><META
NAME="DC.source"
CONTENT="1-56592-149-6"
SCHEME="ISBN"><META
NAME="DC.language"
CONTENT="en-US"><META
NAME="generator"
CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINK
REV="made"
HREF="mailto:online-books@oreilly.com"
TITLE="Online Books Comments"><LINK
REL="up"
HREF="ch03_02.htm"
TITLE="3.2 Perl Functions in Alphabetical Order"><LINK
REL="prev"
HREF="ch03_017.htm"
TITLE="3.2.17 chroot"><LINK
REL="next"
HREF="ch03_019.htm"
TITLE="3.2.19 closedir"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
><DIV
CLASS="htmlnav"
><H1
><IMG
SRC="gifs/smbanner.gif"
ALT="Programming Perl"
USEMAP="#srchmap"
BORDER="0"></H1
><MAP
NAME="srchmap"
><AREA
SHAPE="RECT"
COORDS="0,0,466,65"
HREF="index.htm"
ALT="Programming Perl"><AREA
SHAPE="RECT"
COORDS="467,0,514,18"
HREF="../search/psrch.htm"
ALT="Search this book"></MAP
><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT2"
HREF="ch03_017.htm"
TITLE="3.2.17 chroot"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 3.2.17 chroot"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><B
><FONT
FACE="ARIEL,HELVETICA,HELV,SANSERIF"
SIZE="-1"
><A
CLASS="chapter"
REL="up"
HREF="ch03_01.htm"
TITLE="3. Functions"
>Chapter 3<BR>Functions</A
></FONT
></B
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT2"
HREF="ch03_019.htm"
TITLE="3.2.19 closedir"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 3.2.19 closedir"
BORDER="0"></A
></TD
></TR
></TABLE
>&nbsp;<HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><DIV
CLASS="SECT2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="PERL2-CMD-CLOSE"
>3.2.18 close</A
></H3
><PRE
CLASS="programlisting"
>close <CODE
CLASS="replaceable"
><I
>FILEHANDLE</I
></CODE
></PRE
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-9334"
></A
><A
CLASS="indexterm"
NAME="AUTOID-9336"
></A
><A
CLASS="indexterm"
NAME="AUTOID-9339"
></A
><A
CLASS="indexterm"
NAME="AUTOID-9342"
></A
><A
CLASS="indexterm"
NAME="AUTOID-9345"
></A
><A
CLASS="indexterm"
NAME="AUTOID-9348"
></A
><A
CLASS="indexterm"
NAME="AUTOID-9351"
></A
>This function closes the file, socket, or pipe associated with the filehandle.
You don't have to close <CODE
CLASS="replaceable"
><I
>FILEHANDLE</I
></CODE
> if you are immediately going to do
another <A
CLASS="xref"
HREF="ch03_102.htm"
TITLE="open"
><B
CLASS="xref.cmd"
>open</B
></A
> on it, since the next <A
CLASS="xref"
HREF="ch03_102.htm"
TITLE="open"
><B
CLASS="xref.cmd"
>open</B
></A
> will close it for
you.  (See <A
CLASS="xref"
HREF="ch03_102.htm"
TITLE="open"
><B
CLASS="xref.cmd"
>open</B
></A
>.)  However, an explicit <B
CLASS="emphasis.bold"
>close</B
> on an input file
resets the line counter (<B
CLASS="emphasis.bold"
>$.</B
>), while the implicit close done by
<A
CLASS="xref"
HREF="ch03_102.htm"
TITLE="open"
><B
CLASS="xref.cmd"
>open</B
></A
> does not.
Also, closing a pipe will wait for the process executing on the pipe
to complete (in case you want to look at the output of the pipe
afterward), and it prevents the script from exiting before the pipeline is
finished.[<A
CLASS="footnote"
HREF="#AUTOID-9362"
>1</A
>]
Closing a pipe explicitly also puts the status value of the command
executing on the pipe into
<B
CLASS="emphasis.bold"
>$?</B
>.
For example:<A
CLASS="indexterm"
NAME="AUTOID-9367"
></A
></P
><BLOCKQUOTE
CLASS="footnote"
><DIV
CLASS="footnote"
><P
CLASS="para"
><A
CLASS="footnote"
NAME="AUTOID-9362"
>[1]</A
> Note, however, that a
<EM
CLASS="emphasis"
>dup</EM
>'ed
pipe is treated as an ordinary filehandle,
and <B
CLASS="emphasis.bold"
>close</B
> will not wait for the child on that filehandle.
You have to wait for the child by closing the filehandle on which
it was originally opened.</P
></DIV
></BLOCKQUOTE
><PRE
CLASS="programlisting"
>open OUTPUT, '|sort &gt;foo';     # pipe to sort
...                            # print stuff to output
close OUTPUT;                  # wait for sort to finish
die &quot;sort failed&quot; if $?;       # check for sordid sort
open INPUT, 'foo';             # get sort's results</PRE
><P
CLASS="para"
><CODE
CLASS="replaceable"
><I
>FILEHANDLE</I
></CODE
>
may be an expression whose value gives the real filehandle name.
It may also be a reference to a filehandle object returned by some of
the newer object-oriented I/O packages.</P
></DIV
><DIV
CLASS="htmlnav"
><P
></P
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT2"
HREF="ch03_017.htm"
TITLE="3.2.17 chroot"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 3.2.17 chroot"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="book"
HREF="index.htm"
TITLE="Programming Perl"
><IMG
SRC="../gifs/txthome.gif"
ALT="Programming Perl"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT2"
HREF="ch03_019.htm"
TITLE="3.2.19 closedir"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 3.2.19 closedir"
BORDER="0"></A
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
>3.2.17 chroot</TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="index"
HREF="index/idx_0.htm"
TITLE="Book Index"
><IMG
SRC="../gifs/index.gif"
ALT="Book Index"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
>3.2.19 closedir</TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><P
CLASS="nav"
><FONT
SIZE="-1"
>[ <A
HREF="../index.htm"
TITLE="The Perl CD Bookshelf"
>Library Home</A
> | <A
HREF="../perlnut/index.htm"
TITLE="Perl in a Nutshell"
>Perl in a Nutshell</A
> | <A
HREF="../learn/index.htm"
TITLE="Learning Perl"
>Learning Perl</A
> | <A
HREF="../learn32/index.htm"
TITLE="Learning Perl on Win32 Systems"
>Learning Perl on Win32</A
> | <A
HREF="index.htm"
TITLE="Programming Perl"
>Programming Perl</A
> | <A
HREF="../advprog/index.htm"
TITLE="Advanced Perl Programming"
>Advanced Perl Programming</A
> | <A
HREF="../cookbook/index.htm"
TITLE="Perl Cookbook"
>Perl Cookbook</A
> ]</FONT
></P
></DIV
></BODY
></HTML
>
